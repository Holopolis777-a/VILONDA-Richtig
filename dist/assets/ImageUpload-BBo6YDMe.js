import{R as j,j as t,q as w,B as N,X as I}from"./index-xKrTDA7N.js";function R({images:o,onUpload:m,maxFiles:i=1,acceptedFileTypes:h=["image/jpeg","image/png"],maxFileSize:v=5*1024*1024}){const f=j.useRef(null),[y,d]=j.useState(!1),x=async e=>{const r=Array.from(e).filter(a=>h.includes(a.type)?a.size>v?(alert("Datei ist zu groß (max. 5MB)"),!1):!0:(alert("Ungültiges Dateiformat"),!1));if(o.length+r.length>i){alert(`Maximal ${i} Bilder erlaubt`);return}const l=await Promise.all(r.map(a=>D(a)));m([...o,...l])},D=e=>new Promise(r=>{const l=new FileReader;l.onloadend=()=>{const a=new Image;a.onload=()=>{const c=document.createElement("canvas");let s=a.width,n=a.height;const g=1920,u=1080;s>g&&(n=Math.round(n*g/s),s=g),n>u&&(s=Math.round(s*u/n),n=u),c.width=s,c.height=n;const p=c.getContext("2d");p==null||p.drawImage(a,0,0,s,n),r(c.toDataURL("image/jpeg",.8))},a.src=l.result},l.readAsDataURL(e)}),b=e=>{e.preventDefault(),d(!1),x(e.dataTransfer.files)};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 transition-colors ${y?"border-gray-400 bg-gray-50":"border-gray-200"}`,onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:()=>d(!1),onDrop:b,children:[t.jsxs("div",{className:"text-center",children:[t.jsx(w,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("div",{className:"mt-4",children:t.jsx(N,{type:"button",variant:"outline",onClick:()=>{var e;return(e=f.current)==null?void 0:e.click()},children:"Bilder auswählen"})}),t.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["oder per Drag & Drop • max. ",i," Bilder • max. 5MB pro Bild"]})]}),t.jsx("input",{ref:f,type:"file",className:"hidden",accept:h.join(","),multiple:i>1,onChange:e=>e.target.files&&x(e.target.files)})]}),o.length>0&&t.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.map((e,r)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:e,alt:`Upload ${r+1}`,className:"w-full h-48 object-cover rounded-lg"}),t.jsx("button",{type:"button",onClick:()=>m(o.filter((l,a)=>a!==r)),className:"absolute top-2 right-2 p-1 bg-red-100 rounded-full text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(I,{className:"w-4 h-4"})})]},r))})]})}export{R as I};
