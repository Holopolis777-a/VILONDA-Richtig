import{j as e,a as h,R as n}from"./index-xKrTDA7N.js";import{u as x}from"./orderStore-Tb90s500.js";import{u}from"./memberStore-CVVyh3M3.js";import{f as g}from"./dateUtils-DFVphTDA.js";import{B as f}from"./Badge-v6lJ1hQp.js";import{S as j}from"./shield-Dkc3ZdED.js";import{L as p}from"./LoadingSpinner-BHxJpPMT.js";import{C as N}from"./clock-CXsEwfTr.js";const v={insurance:"Vollkasko- & Haftpflichtversicherung",maintenance:"Wartung & Verschleiß",winterTires:"Winterreifen",gap:"GAP Deckung Premium",roadside:"KFZ-Schutzbrief & Pannenhilfe",damageManagement:"Schadensmanagement",delivery:"Überführung & Zulassung"};function b({order:s,member:a,showActions:l=!0}){return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.vehicle.image,alt:`${s.vehicle.make} ${s.vehicle.model}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-lg",children:[s.vehicle.make," ",s.vehicle.model]}),e.jsxs("div",{className:"mt-1 space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{children:["Bestellnummer: ",s.orderNumber]}),e.jsxs("p",{children:["Bestellt am: ",g(s.createdAt)]}),a&&e.jsxs("p",{className:"font-medium text-gray-900",children:["Mitglied: ",a.firstName," ",a.lastName]}),e.jsxs("p",{children:["Farbe: ",s.configuration.color]}),e.jsxs("p",{children:["Laufzeit: ",s.configuration.duration," Monate"]}),e.jsxs("p",{children:["Kilometer/Jahr: ",s.configuration.kilometers.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-semibold",children:[s.totalMonthlyRate.toFixed(2),"€ ",e.jsx("span",{className:"text-sm text-gray-500",children:"/Monat"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(f,{variant:s.status==="cancelled"?"error":s.status==="confirmed"?"success":"warning",children:s.status==="cancelled"?"Storniert":s.status==="confirmed"?"Bestätigt":"Ausstehend"})})]})]}),s.configuration.services.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(j,{className:"w-5 h-5 text-gray-600 mr-2"}),e.jsx("h4",{className:"font-medium",children:"Gewählte Services:"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.configuration.services.map(i=>e.jsxs("div",{className:"text-sm text-gray-600",children:["• ",v[i]||i]},i))})]})]})})}function I(){const{user:s}=h(),{orders:a}=x(),{getMembersForBroker:l}=u(),[i,d]=n.useState(!0),c=n.useMemo(()=>s!=null&&s.id?l(s.id):[],[s==null?void 0:s.id,l]),m=n.useMemo(()=>{const r=c.map(t=>t.id);return a.filter(t=>r.includes(t.userId)).sort((t,o)=>o.createdAt.getTime()-t.createdAt.getTime())},[a,c]);return n.useEffect(()=>{d(!1)},[]),i?e.jsx(p,{}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Keine Bestellungen"}),e.jsx("p",{className:"text-gray-500",children:"Ihre Mitglieder haben noch keine Bestellungen aufgegeben."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h1",{className:"text-2xl font-semibold",children:"Mitgliederbestellungen"})}),e.jsx("div",{className:"grid gap-6",children:m.map(r=>e.jsx(b,{order:r,member:c.find(t=>t.id===r.userId),showActions:!1},r.id))})]})}export{I as default};
