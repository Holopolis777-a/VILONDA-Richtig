import{j as e,b as u,M as g,S as f,I as j,R as x}from"./index-xKrTDA7N.js";import{u as N}from"./memberStore-CVVyh3M3.js";import{u as m}from"./brokerStore-BG-dfO2t.js";import{f as o}from"./dateUtils-DFVphTDA.js";import{T as y}from"./trash-2-B5BVGcKx.js";import{C as w}from"./clock-CXsEwfTr.js";import{C as v}from"./check-circle-DFIg8aHR.js";import{L as k}from"./LoadingSpinner-BHxJpPMT.js";import{B as C}from"./Badge-v6lJ1hQp.js";function M({members:r,showBrokerInfo:l=!1,onDelete:n}){const{brokers:a}=m(),d=s=>{if(!s)return null;const c=a.find(t=>t.id===s);return c?`${c.name} (${c.company})`:null},i=s=>{switch(s){case"active":return e.jsxs("span",{className:"bg-green-100 text-green-800 flex items-center px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"Aktiv"]});case"invited":return e.jsxs("span",{className:"bg-blue-100 text-blue-800 flex items-center px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Eingeladen"]});default:return e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 flex items-center px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Ausstehend"]})}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mitgliedsnummer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name/E-Mail"}),l&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Makler"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Datum"}),e.jsx("th",{className:"px-6 py-3 relative",children:e.jsx("span",{className:"sr-only",children:"Aktionen"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.memberNumber})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm",children:s.status==="invited"?e.jsx("div",{className:"text-gray-900",children:s.email}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("div",{className:"text-gray-500",children:s.email})]})})}),l&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.brokerId?e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(u,{className:"w-4 h-4 mr-2 text-gray-400"}),d(s.brokerId)]}):e.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.status==="invited"?`Eingeladen am ${o(s.invitedAt)}`:`Registriert am ${o(s.joinDate)}`}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>n(s.id),className:"text-red-600 hover:text-red-900",children:e.jsx(y,{className:"w-4 h-4"})})})]},s.id))})]})})}function b({searchTerm:r,onSearchChange:l}){return e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(j,{placeholder:"Suche nach Name, E-Mail oder Mitgliedsnummer...",value:r,onChange:n=>l(n.target.value),className:"pl-10"})]})}function $(){const{members:r,loading:l}=N(),{brokers:n}=m(),[a,d]=x.useState(""),[i,s]=x.useState("all"),c=x.useMemo(()=>r.filter(t=>{const h=t.firstName.toLowerCase().includes(a.toLowerCase())||t.lastName.toLowerCase().includes(a.toLowerCase())||t.email.toLowerCase().includes(a.toLowerCase())||t.memberNumber.toLowerCase().includes(a.toLowerCase()),p=i==="all"||t.brokerId===i;return h&&p}),[r,a,i]);return l?e.jsx(k,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Mitglieder"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:["Gesamtanzahl: ",e.jsx(C,{variant:"info",children:r.length})]})]})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(b,{searchTerm:a,onSearchChange:d}),e.jsxs("select",{value:i,onChange:t=>s(t.target.value),className:"h-10 rounded-lg border-gray-300 focus:border-primary-400 focus:ring-primary-400",children:[e.jsx("option",{value:"all",children:"Alle Makler"}),n.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.company,")"]},t.id))]})]}),e.jsx(M,{members:c,showBrokerInfo:!0,onDelete:()=>{}})]})]})}export{$ as default};
