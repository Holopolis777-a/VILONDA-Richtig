import{e as m,a as h,R as x,j as e,g,B as f,n}from"./index-xKrTDA7N.js";import{f as l}from"./dateUtils-DFVphTDA.js";import{B as p}from"./Badge-v6lJ1hQp.js";import{L as u}from"./LoadingSpinner-BHxJpPMT.js";import{C as c}from"./clock-CXsEwfTr.js";import{C as j}from"./calendar-CHRCL5nd.js";import{X as v}from"./x-circle-CCY05Z2t.js";const w=m(a=>({requests:[],loading:!1,error:null,fetchRequests:async r=>{a({loading:!0});try{await new Promise(i=>setTimeout(i,1e3)),a({requests:[{id:"1",userId:r,vehicle:{make:"BMW",model:"3er",type:"Limousine",image:"https://images.unsplash.com/photo-1555215695-3004980ad54e?auto=format&fit=crop&w=800"},startDate:new Date("2024-04-01"),endDate:new Date("2024-04-15"),status:"pending",bookingReference:"REQ-2024-001"},{id:"2",userId:r,vehicle:{make:"Tesla",model:"Model 3",type:"Limousine",image:"https://images.unsplash.com/photo-1560958089-b8a1929cea89?auto=format&fit=crop&w=800"},startDate:new Date("2024-05-01"),endDate:new Date("2024-05-31"),status:"approved",bookingReference:"REQ-2024-002"}],loading:!1})}catch{a({error:"Failed to fetch requests",loading:!1})}},cancelRequest:async r=>{a({loading:!0});try{await new Promise(t=>setTimeout(t,1e3)),a(t=>({requests:t.requests.filter(i=>i.id!==r),loading:!1}))}catch(t){throw a({error:"Failed to cancel request",loading:!1}),t}}}));function S(){const{user:a}=h(),{requests:r,loading:t,fetchRequests:i,cancelRequest:o}=w();x.useEffect(()=>{a!=null&&a.id&&i(a.id)},[a==null?void 0:a.id,i]);const d=async s=>{if(confirm("MÃ¶chten Sie diese Anfrage wirklich stornieren?"))try{await o(s),n.success("Anfrage wurde erfolgreich storniert")}catch{n.error("Fehler beim Stornieren der Anfrage")}};return t?e.jsx(u,{}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-primary-400 rounded-xl",children:e.jsx(c,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Meine Anfragen"}),e.jsx("p",{className:"text-gray-500",children:"Verwalten Sie Ihre Fahrzeuganfragen"})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Keine Anfragen"}),e.jsx("p",{className:"text-gray-500",children:"Sie haben noch keine Fahrzeuganfragen gestellt."})]}):e.jsx("div",{className:"grid gap-6",children:r.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-32 h-24 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.vehicle.image,alt:`${s.vehicle.make} ${s.vehicle.model}`,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[s.vehicle.make," ",s.vehicle.model]}),e.jsxs("div",{className:"mt-2 space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.vehicle.type})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["Zeitraum: ",l(s.startDate)," - ",l(s.endDate)]})]})]})]})]}),e.jsxs("div",{className:"text-right space-y-3",children:[e.jsx(p,{variant:s.status==="approved"?"success":s.status==="rejected"?"error":"warning",children:s.status==="approved"?"Genehmigt":s.status==="rejected"?"Abgelehnt":"Ausstehend"}),s.status==="pending"&&e.jsx("div",{children:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>d(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Stornieren"]})})]})]}),s.bookingReference&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Buchungsreferenz: ",e.jsx("span",{className:"font-medium",children:s.bookingReference})]})})]},s.id))})]})}export{S as default};
