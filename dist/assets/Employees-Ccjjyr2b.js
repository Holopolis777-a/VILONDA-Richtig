import{e as v,j as e,R as g,g as w,W as k,b as E,U as M,I as S,B as p,M as C,n,a as L,_ as b}from"./index-xKrTDA7N.js";import{f as P}from"./dateUtils-DFVphTDA.js";import{C as j}from"./check-circle-DFIg8aHR.js";import{C as F}from"./clock-CXsEwfTr.js";import{T as A}from"./trash-2-B5BVGcKx.js";import{L as $}from"./link-DWxs9j0D.js";import{P as I}from"./plus-By_5y3b0.js";const D=v(s=>({employees:[],loading:!1,error:null,fetchEmployees:async l=>{s({loading:!0});try{await new Promise(t=>setTimeout(t,1e3)),s({employees:[],loading:!1})}catch{s({error:"Failed to fetch employees",loading:!1})}},inviteEmployee:async(l,t,r)=>{s({loading:!0});try{await new Promise(c=>setTimeout(c,1e3));const a={id:Date.now().toString(),employerId:l,firstName:"",lastName:"",email:t,employeeNumber:`EMP${Date.now().toString().slice(-3)}`,status:"pending",portalType:r,joinDate:new Date};s(c=>({employees:[...c.employees,a],loading:!1}))}catch(a){throw s({error:"Failed to invite employee",loading:!1}),a}},generateInviteLink:async(l,t)=>{try{await new Promise(a=>setTimeout(a,1e3));const r=Math.random().toString(36).substring(7);return`https://vilocar.com/invite/${l}/${t}/${r}`}catch(r){throw r}},deleteEmployee:async l=>{s({loading:!0});try{s(t=>({employees:t.employees.filter(r=>r.id!==l),loading:!1}))}catch{s({error:"Failed to delete employee",loading:!1})}}}));function B({employees:s,onDelete:l}){return e.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mitarbeiter"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eintrittsdatum"}),e.jsx("th",{className:"px-6 py-3 relative",children:e.jsx("span",{className:"sr-only",children:"Aktionen"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:t.position}),e.jsx("div",{className:"text-sm text-gray-500",children:t.department})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:[t.status==="active"?e.jsx(j,{className:"w-4 h-4 mr-1"}):e.jsx(F,{className:"w-4 h-4 mr-1"}),t.status==="active"?"Aktiv":"Ausstehend"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(t.joinDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>l(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx(A,{className:"w-4 h-4"})})})]},t.id))})]})})}const N={salary:{employer:["Reduzierung administrativer Aufwände","Förderung von Nachhaltigkeit","Steigerung der Arbeitgeberattraktivität","Kostenneutral für den Arbeitgeber"],employee:["Steuerliche Ersparnisse durch Brutto-Gehaltsumwandlung","Rundum-sorglos-Paket mit Full-Service","Attraktive Auswahl an E-Fahrzeugen","Beitrag zur Nachhaltigkeit"]},employee:{employer:["Kein administrativer Aufwand","Einfache Bereitstellung von Benefits","Positive Arbeitgeberwahrnehmung","Flexible Gestaltungsmöglichkeiten"],employee:["Exklusive Sonderkonditionen","Große Fahrzeugauswahl","Einfacher digitaler Prozess","Flexible Leasing- oder Kaufoptionen"]}};function G({onInvite:s,onGenerateLink:l,onClose:t,employerId:r}){const[a,c]=g.useState("employee"),[x,d]=g.useState(""),[h,y]=g.useState(""),o=async i=>{if(i.preventDefault(),!(!r||!x))try{await s(r,x,a),d(""),n.success("Einladung erfolgreich versendet")}catch{n.error("Fehler beim Versenden der Einladung")}},m=async()=>{if(r)try{const i=await l(r,a);y(i),n.success("Link wurde generiert")}catch{n.error("Fehler beim Generieren des Links")}},f=()=>{navigator.clipboard.writeText(h),n.success("Link wurde kopiert")};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8 mb-8 lg:mb-12",children:[e.jsx("button",{onClick:()=>c("employee"),className:`p-6 lg:p-8 rounded-xl lg:rounded-2xl border-2 transition-all text-left ${a==="employee"?"border-primary-400 bg-primary-50/50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start space-x-4 lg:flex-col lg:items-center lg:space-x-0 lg:text-center",children:[e.jsx("div",{className:`w-16 h-16 lg:w-20 lg:h-20 rounded-xl lg:rounded-2xl flex items-center justify-center lg:mb-6 ${a==="employee"?"bg-primary-400":"bg-gray-100"}`,children:e.jsx(w,{className:`w-8 h-8 lg:w-10 lg:h-10 ${a==="employee"?"text-white":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1 lg:flex-none",children:[e.jsx("h3",{className:"text-xl lg:text-2xl font-semibold mb-2 lg:mb-3",children:"Mitarbeiter Portal"}),e.jsx("p",{className:"text-gray-600",children:"Laden Sie Mitarbeiter ein, die Zugriff auf das Mitarbeiter-Portal mit Benefit-Fahrzeugen erhalten sollen."})]})]})}),e.jsx("button",{onClick:()=>c("salary"),className:`p-6 lg:p-8 rounded-xl lg:rounded-2xl border-2 transition-all text-left ${a==="salary"?"border-primary-400 bg-primary-50/50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-start space-x-4 lg:flex-col lg:items-center lg:space-x-0 lg:text-center",children:[e.jsx("div",{className:`w-16 h-16 lg:w-20 lg:h-20 rounded-xl lg:rounded-2xl flex items-center justify-center lg:mb-6 ${a==="salary"?"bg-primary-400":"bg-gray-100"}`,children:e.jsx(k,{className:`w-8 h-8 lg:w-10 lg:h-10 ${a==="salary"?"text-white":"text-gray-600"}`})}),e.jsxs("div",{className:"flex-1 lg:flex-none",children:[e.jsx("h3",{className:"text-xl lg:text-2xl font-semibold mb-2 lg:mb-3",children:"Gehaltsumwandlung Portal"}),e.jsx("p",{className:"text-gray-600",children:"Ermöglichen Sie Ihren Mitarbeitern Dienstwagen-Leasing durch Gehaltsumwandlung."})]})]})})]}),e.jsx("div",{className:"bg-gray-50 p-6 lg:p-8 rounded-xl lg:rounded-2xl mb-8 lg:mb-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(E,{className:"w-6 h-6 text-blue-600"})}),e.jsx("h4",{className:"text-lg lg:text-xl font-semibold text-gray-900",children:"Vorteile für Sie als Arbeitgeber"})]}),e.jsx("ul",{className:"space-y-4",children:N[a].employer.map((i,u)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:i})]},u))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(M,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h4",{className:"text-lg lg:text-xl font-semibold text-gray-900",children:"Vorteile für Ihre Mitarbeiter"})]}),e.jsx("ul",{className:"space-y-4",children:N[a].employee.map((i,u)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-5 h-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600",children:i})]},u))})]})]})}),e.jsx("div",{className:"bg-white p-6 lg:p-8 rounded-xl lg:rounded-2xl border border-gray-200 shadow-sm",children:e.jsxs("form",{onSubmit:o,className:"space-y-6 max-w-2xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-lg font-medium text-gray-700 mb-3",children:"E-Mail-Adresse des Mitarbeiters"}),e.jsx(S,{type:"email",value:x,onChange:i=>d(i.target.value),placeholder:"mitarbeiter@firma.de",required:!0,className:"h-14 text-lg"})]}),e.jsxs(p,{type:"submit",className:"w-full h-14 text-lg",children:[e.jsx(C,{className:"w-6 h-6 mr-3"}),"Per E-Mail einladen"]}),e.jsxs("div",{className:"relative my-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-200"})}),e.jsx("div",{className:"relative flex justify-center text-base",children:e.jsx("span",{className:"px-4 bg-white text-gray-500",children:"oder"})})]}),e.jsxs(p,{variant:"outline",onClick:m,className:"w-full h-14 text-lg",children:[e.jsx($,{className:"w-6 h-6 mr-3"}),"Einladungslink generieren"]}),h&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200 break-all font-mono text-sm",children:h}),e.jsx(p,{variant:"secondary",onClick:f,className:"w-full h-14 text-lg",children:"Link kopieren"})]})]})})]})}function W(){const{user:s}=L(),{employees:l,loading:t,fetchEmployees:r,inviteEmployee:a,deleteEmployee:c}=D(),[x,d]=g.useState(!1);g.useEffect(()=>{s!=null&&s.id&&r(s.id)},[s==null?void 0:s.id,r]);const h=async(o,m,f)=>{try{await a(o,m,f),n.success("Einladung erfolgreich versendet"),d(!1)}catch{n.error("Fehler beim Versenden der Einladung")}},y=async o=>{if(confirm("Möchten Sie diesen Mitarbeiter wirklich löschen?"))try{await c(o),n.success("Mitarbeiter erfolgreich gelöscht")}catch{n.error("Fehler beim Löschen des Mitarbeiters")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Mitarbeiter"}),e.jsxs(p,{onClick:()=>d(!0),children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Mitarbeiter einladen"]})]}),e.jsx(B,{employees:l,onDelete:y}),e.jsx(b,{open:x,onClose:()=>d(!1),className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx(b.Overlay,{className:"fixed inset-0 bg-black/30"}),e.jsxs("div",{className:"relative bg-white w-full max-w-[90vw] rounded-2xl p-8 overflow-y-auto max-h-[90vh]",children:[e.jsx(b.Title,{className:"text-2xl font-semibold text-gray-900 mb-8",children:"Neuen Mitarbeiter einladen"}),e.jsx(G,{onInvite:h,onClose:()=>d(!1),employerId:s==null?void 0:s.id,onGenerateLink:async(o,m)=>`https://example.com/invite/${o}/${m}/${Math.random().toString(36).substring(7)}`})]})]})})]})}export{W as default};
