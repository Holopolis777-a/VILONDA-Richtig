import{c as _,j as e,B as x,R as m,_ as S,X as J,a as D,u as v,F as V,g as C,n as h,h as N,e as P,s as F,I as A,i as X,k as f}from"./index-xKrTDA7N.js";import{u as b}from"./vehicleStore-j7f6udb0.js";import{u as w,V as M}from"./VehicleGrid-Cnl27RSR.js";import{P as R}from"./plus-By_5y3b0.js";import{V as B,D as U,K as Q,A as k,a as I,b as K,c as L,d as T,e as E,I as O,f as Z}from"./KilometerSelector-C80VTmx-.js";import{C as Y}from"./Checkbox-CgYu5-DF.js";import{S as G}from"./shield-Dkc3ZdED.js";import{u as ee}from"./orderStore-Tb90s500.js";import{E as se}from"./euro-BPgclUDC.js";import{T as $}from"./wrench-Dfbb8ocB.js";import{P as te}from"./piggy-bank-XZIR1P5j.js";import{B as ae}from"./banknote-BrcBAbmh.js";import{C as W}from"./clock-CXsEwfTr.js";import{f as z}from"./dateUtils-DFVphTDA.js";import{S as re}from"./Select-DSiwQjuV.js";import{L as ie}from"./LoadingSpinner-BHxJpPMT.js";import{C as ne}from"./calendar-CHRCL5nd.js";import{X as le}from"./x-circle-CCY05Z2t.js";import"./pen-C89hxg5V.js";import"./ImageUpload-BMu4ucjn.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=_("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);function oe({onAddVehicle:a,showAddButton:t}){return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Fahrzeuge"}),t&&e.jsxs(x,{onClick:a,children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Neues Fahrzeug anlegen"]})]})}function de(){const{vehicles:a,loading:t}=b(),[i,r]=m.useState(!1),{canManageVehicles:s,isAdmin:l}=w();return e.jsxs("div",{className:"space-y-6",children:[e.jsx(oe,{onAddVehicle:()=>r(!0),showAddButton:l}),e.jsx("div",{className:"w-full",children:e.jsx(M,{vehicles:a,loading:t})}),s&&e.jsx(B,{isOpen:i,onClose:()=>r(!1),store:b()})]})}function me({isOpen:a,onClose:t,onConfirm:i}){const[r,s]=m.useState(!1),l=c=>{c.preventDefault(),r&&i()};return e.jsx(S,{open:a,onClose:t,className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4",children:[e.jsx(S.Overlay,{className:"fixed inset-0 bg-black/30"}),e.jsxs("div",{className:"relative bg-white rounded-xl max-w-2xl w-full p-6",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-500 rounded-full",children:e.jsx(J,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-full flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-blue-600"})}),e.jsx(S.Title,{className:"text-xl font-semibold text-gray-900",children:"Datenschutzhinweis"})]}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"prose prose-sm text-gray-600",children:[e.jsx("p",{children:"Im Rahmen der Bearbeitung Ihrer Anfrage werden Ihre E-Mail-Adresse und Ihre Mobiltelefonnummer an die Santander Consumer Bank AG übermittelt. Die Übertragung erfolgt ausschließlich zum Zweck der Bearbeitung Ihres Anliegens sowie zur Kontaktaufnahme im Zusammenhang mit Ihrer Anfrage."}),e.jsxs("p",{children:["Die Verarbeitung Ihrer Daten erfolgt gemäß den geltenden Datenschutzbestimmungen, insbesondere der DSGVO. Weitere Informationen zur Datenverarbeitung und Ihren Rechten entnehmen Sie bitte der"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800",onClick:c=>c.preventDefault(),children:"Datenschutzerklärung der Santander Consumer Bank AG"})," ","sowie unserer eigenen"," ",e.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-800",onClick:c=>c.preventDefault(),children:"Datenschutzerklärung"}),"."]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Y,{id:"privacy-consent",checked:r,onChange:c=>s(c)}),e.jsx("label",{htmlFor:"privacy-consent",className:"text-sm text-gray-600 cursor-pointer",children:"Ich stimme der Übermittlung und Verarbeitung meiner Daten gemäß der oben genannten Datenschutzbestimmungen zu."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(x,{type:"button",variant:"outline",onClick:t,children:"Abbrechen"}),e.jsx(x,{type:"submit",disabled:!r,children:"Jetzt absenden"})]})]})]})]})})}function he({monthlyRate:a,vehicle:t,selectedServices:i,selectedMonths:r,selectedKilometers:s}){const[l,c]=m.useState(!1),{user:o}=D(),{createOrder:d}=ee(),g=v(),p=async()=>{if(!o){h.error("Bitte melden Sie sich an, um eine Bestellung aufzugeben");return}try{await d(t.id,o.id,{color:t.color,materials:[],monthlyRate:a,duration:r,kilometers:s,services:i},t),h.success("Ihr Fahrzeug wurde unverbindlich angefragt"),c(!1),g("/my-orders")}catch{h.error("Es ist ein Fehler aufgetreten")}},n=t.oneTimeCosts.registration+t.oneTimeCosts.homeDelivery+t.oneTimeCosts.transfer;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-400 to-primary-500 p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Monatliche Rate"}),e.jsxs("div",{className:"flex items-baseline space-x-2",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[a.toFixed(2),"€"]}),e.jsx("span",{className:"text-sm opacity-90",children:"inkl. MwSt"})]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center",children:e.jsx(se,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 bg-gray-50 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Laufzeit:"}),e.jsxs("p",{className:"font-medium",children:[r," Monate"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Kilometer/Jahr:"}),e.jsx("p",{className:"font-medium",children:s.toLocaleString()})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx(x,{onClick:()=>c(!0),className:"w-full py-4 text-lg bg-primary-400 hover:bg-primary-500 transition-colors",children:"Jetzt unverbindlich anfragen"}),n>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Einmalige Kosten:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Zulassungskosten"})]}),e.jsxs("span",{className:"font-medium",children:[t.oneTimeCosts.registration.toFixed(2),"€*"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Haustürlieferung"})]}),e.jsxs("span",{className:"font-medium",children:[t.oneTimeCosts.homeDelivery.toFixed(2),"€*"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Überführungskosten"})]}),e.jsxs("span",{className:"font-medium",children:[t.oneTimeCosts.transfer.toFixed(2),"€*"]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Gesamte Einmalkosten:"}),e.jsxs("span",{className:"font-semibold text-lg",children:[n.toFixed(2),"€*"]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"*inkl. MwSt"})]})]})]})]}),e.jsx(me,{isOpen:l,onClose:()=>c(!1),onConfirm:p})]})}function q({vehicle:a,onConfigurationChange:t}){const[i,r]=m.useState(36),[s,l]=m.useState(1e4),[c,o]=m.useState([]),d=a.leasingRates[`${i}_${s}`]||0,g=c.reduce((j,H)=>j+(a.servicePrices[H]||0),0),p=d+g;m.useEffect(()=>{t==null||t(i,s,p)},[i,s,p,t]);const n=j=>{r(j)},u=j=>{l(j)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(U,{selectedMonths:i,onChange:n}),e.jsx(Q,{selectedKilometers:s,onChange:u}),e.jsx(he,{monthlyRate:p,vehicle:a,selectedServices:c,selectedMonths:i,selectedKilometers:s})]})}function xe(){const{id:a}=N(),t=v(),{vehicles:i,updateVehicle:r}=b(),s=i.find(d=>d.id===a),[l,c]=m.useState(s==null?void 0:s.color);if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Fahrzeug nicht gefunden."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles"),children:"Zurück zur Übersicht"})]});const o=async d=>{try{await r(s.id,{color:d.name}),c(d.name),h.success(`Farbe ${d.name} ausgewählt`)}catch{h.error("Fehler beim Aktualisieren der Farbe")}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>t("/vehicles"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Zurück zur Übersicht"]}),e.jsx(I,{vehicle:s}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(K,{images:s.images}),e.jsx(L,{vehicle:s}),e.jsx(T,{colors:s.availableColors,selectedColor:l,onColorSelect:o}),e.jsx(E,{features:s.features,customFeatures:s.customFeatures}),e.jsx(O,{services:s.services,prices:s.servicePrices})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.make," ",s.model]}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:s.type})]}),e.jsx(q,{vehicle:s})]})]})]})}function ue(){const{id:a}=N(),t=v(),{vehicles:i,updateVehicle:r}=b(),{isAdmin:s}=w(),l=i.find(o=>o.id===a);if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Sie haben keine Berechtigung, Fahrzeuge zu bearbeiten."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles"),children:"Zurück zur Übersicht"})]});if(!l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Fahrzeug nicht gefunden."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles"),children:"Zurück zur Übersicht"})]});const c=async o=>{try{await r(a,o),h.success("Fahrzeug erfolgreich aktualisiert"),t("/vehicles")}catch{h.error("Fehler beim Aktualisieren des Fahrzeugs")}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/vehicles"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Zurück zur Übersicht"]}),e.jsxs("h1",{className:"text-2xl font-semibold",children:[l.make," ",l.model," bearbeiten"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx(Z,{initialData:l,onSubmit:c,onCancel:()=>t("/vehicles")})})]})}function ge(){const a=[{icon:C,title:"Große Fahrzeugauswahl",description:"Vielfältiges Angebot an Neuwagen verschiedener Marken",items:["Breite Auswahl an Neuwagen unterschiedlicher Marken","Diverse Modelle und Ausstattungsvarianten verfügbar","Spezialisierung auf Neuwagen zu attraktiven Konditionen","Regelmäßige Erweiterung des Fahrzeugangebots","Individuelle Konfigurationsmöglichkeiten"]},{icon:te,title:"Attraktive Preise",description:"Günstige Konditionen durch Großkundenrabatte",items:["Deutlich günstigere Preise als im lokalen Autohaus","Attraktive Rabatte durch Großkundenkonditionen","Günstige Leasingkonditionen für Neuwagen","Transparente Preisgestaltung ohne versteckte Kosten","Beste Konditionen durch gebündelte Nachfrage"]},{icon:G,title:"All-Inclusive Paket",description:"Vollkasko, Wartung, Winterreifen und mehr in einer Rate",items:["Vollkasko- & Haftpflichtversicherung inklusive","Wartung & Verschleiß inklusive","Winterreifen mit Wechsel & Einlagerung","Zulassung & Überführung inklusive","KFZ-Steuer & Rundfunkbeitrag inklusive"]},{icon:ae,title:"Transparente Kosten",description:"Keine versteckten Gebühren oder Zusatzkosten",items:["Keine Anzahlung erforderlich","Fixe monatliche Rate","Alle Leistungen in einer Rate","Keine Überraschungskosten","Planbare monatliche Belastung"]},{icon:W,title:"Flexibilität & Service",description:"Maximale Flexibilität und erstklassiger Service",items:["Flexible Laufzeiten wählbar","Kilometerpaket anpassbar","Persönlicher Ansprechpartner","Digitaler Bestellprozess","24/7 Pannenhilfe inklusive"]},{icon:$,title:"Kostenlose Lieferung",description:"Bequeme Lieferung bis vor die Haustür",items:["Bundesweite kostenlose Auslieferung","Terminierte Übergabe","Einweisung vor Ort","Fahrzeugübergabe dokumentiert","Professionelle Übergabe"]}];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Vorteile für Ihre Kunden"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Überzeugende Argumente für das All-Inclusive Auto-Abo"})]}),e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:a.map((t,i)=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center",children:e.jsx(t.icon,{className:"w-6 h-6 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]})]}),e.jsx("ul",{className:"space-y-3 mt-6",children:t.items.map((r,s)=>e.jsxs("li",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-50 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-3 h-3 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"text-gray-600 text-sm",children:r})]},s))})]},i))}),e.jsx("div",{className:"mt-12 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-8 text-white",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Überzeugende Vorteile für Ihre Kunden"}),e.jsx("p",{className:"text-lg opacity-90 mb-6",children:"Mit unserem All-Inclusive Auto-Abo bieten Sie Ihren Kunden maximale Transparenz, Flexibilität und Komfort - alles zu einer fixen monatlichen Rate."}),e.jsxs("div",{className:"inline-flex items-center space-x-2 text-sm",children:[e.jsx(V,{className:"w-5 h-5"}),e.jsx("span",{children:"Alle Unterlagen und Marketingmaterialien im Maklerportal verfügbar"})]})]})})]})}const y=P(a=>({vehicles:[],loading:!1,error:null,fetchVehicles:async()=>{a({loading:!0});try{const{data:t,error:i}=await F.from("pool_vehicles").select("*");if(i)throw i;a({vehicles:t||[],loading:!1})}catch(t){console.error("Error fetching pool vehicles:",t),a({error:"Failed to fetch pool vehicles",loading:!1})}},addVehicle:async t=>{var i;a({loading:!0});try{const{data:r,error:s}=await F.from("pool_vehicles").insert([{...t,status:"available",created_by:(i=F.auth.getUser())==null?void 0:i.id}]).select().single();if(s)throw s;r&&a(l=>({vehicles:[...l.vehicles,r],loading:!1}))}catch(r){throw console.error("Error adding pool vehicle:",r),a({error:"Failed to add pool vehicle",loading:!1}),r}},updateVehicle:async(t,i)=>{a({loading:!0});try{a(r=>({vehicles:r.vehicles.map(s=>s.id===t?{...s,...i}:s),loading:!1}))}catch{a({error:"Failed to update pool vehicle",loading:!1})}},deleteVehicle:async t=>{a({loading:!0});try{a(i=>({vehicles:i.vehicles.filter(r=>r.id!==t),loading:!1}))}catch{a({error:"Failed to delete pool vehicle",loading:!1})}}})),pe=P(a=>({requests:[],loading:!1,error:null,fetchRequests:async t=>{a({loading:!0});try{await new Promise(r=>setTimeout(r,1e3)),a({requests:[{id:"1",userId:t,vehicleId:"pool-1",vehicle:{make:"BMW",model:"5er",type:"Limousine",image:"https://images.unsplash.com/photo-1555215695-3004980ad54e?auto=format&fit=crop&w=800"},startDate:new Date("2024-04-01"),endDate:new Date("2024-04-15"),status:"pending",requestDate:new Date("2024-03-15"),bookingReference:"POOL-2024-001"}],loading:!1})}catch{a({error:"Failed to fetch requests",loading:!1})}},updateRequestStatus:async(t,i)=>{a({loading:!0});try{a(r=>({requests:r.requests.map(s=>s.id===t?{...s,status:i}:s),loading:!1}))}catch{a({error:"Failed to update request status",loading:!1})}},cancelRequest:async t=>{a({loading:!0});try{a(i=>({requests:i.requests.filter(r=>r.id!==t),loading:!1}))}catch{a({error:"Failed to cancel request",loading:!1})}}}));function fe(){const{user:a}=D(),{requests:t,loading:i,fetchRequests:r,cancelRequest:s}=pe(),[l,c]=m.useState("all"),[o,d]=m.useState({from:"",to:""});m.useEffect(()=>{a!=null&&a.id&&r(a.id)},[a==null?void 0:a.id,r]);const g=m.useMemo(()=>t.filter(n=>!(l!=="all"&&n.status!==l||o.from&&new Date(o.from)>n.startDate||o.to&&new Date(o.to)<n.endDate)).sort((n,u)=>u.requestDate.getTime()-n.requestDate.getTime()),[t,l,o]),p=async n=>{if(confirm("Möchten Sie diese Anfrage wirklich stornieren?"))try{await s(n),h.success("Anfrage wurde erfolgreich storniert")}catch{h.error("Fehler beim Stornieren der Anfrage")}};return i?e.jsx(ie,{}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Meine Fahrzeuganfragen"}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(re,{value:l,onChange:n=>c(n.target.value),children:[e.jsx("option",{value:"all",children:"Alle Status"}),e.jsx("option",{value:"pending",children:"Ausstehend"}),e.jsx("option",{value:"approved",children:"Genehmigt"}),e.jsx("option",{value:"rejected",children:"Abgelehnt"})]}),e.jsx(A,{type:"date",value:o.from,onChange:n=>d(u=>({...u,from:n.target.value})),placeholder:"Von"}),e.jsx(A,{type:"date",value:o.to,onChange:n=>d(u=>({...u,to:n.target.value})),placeholder:"Bis"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fahrzeug"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Zeitraum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Anfragedatum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buchungsnummer"}),e.jsx("th",{className:"px-6 py-3 relative",children:e.jsx("span",{className:"sr-only",children:"Aktionen"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(n=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:n.vehicle.image,alt:`${n.vehicle.make} ${n.vehicle.model}`})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[n.vehicle.make," ",n.vehicle.model]}),e.jsx("div",{className:"text-sm text-gray-500",children:n.vehicle.type})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(ne,{className:"w-4 h-4 mr-1 text-gray-400"}),z(n.startDate)," - ",z(n.endDate)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${n.status==="approved"?"bg-green-100 text-green-800":n.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:n.status==="approved"?"Genehmigt":n.status==="rejected"?"Abgelehnt":"Ausstehend"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(W,{className:"w-4 h-4 mr-1"}),z(n.requestDate)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.bookingReference}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.status==="pending"&&e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>p(n.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(le,{className:"w-4 h-4 mr-1"}),"Stornieren"]})})]},n.id))})]}),g.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Keine Anfragen gefunden"})})]})]})}function je(){const a=y(),{vehicles:t,loading:i}=a,[r,s]=m.useState(!1),[l,c]=m.useState("vehicles"),{isAdmin:o}=w();return m.useEffect(()=>{a.fetchVehicles()},[]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("button",{onClick:()=>c("vehicles"),className:`flex items-center space-x-2 pb-2 border-b-2 transition-colors ${l==="vehicles"?"border-primary-400 text-primary-400":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Pool-Fahrzeuge"})]}),e.jsxs("button",{onClick:()=>c("requests"),className:`flex items-center space-x-2 pb-2 border-b-2 transition-colors ${l==="requests"?"border-primary-400 text-primary-400":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Meine Anfragen"})]})]}),o&&l==="vehicles"&&e.jsxs(x,{onClick:()=>s(!0),children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Pool-Fahrzeug hinzufügen"]})]}),l==="vehicles"?e.jsx("div",{className:"w-full",children:e.jsx(M,{vehicles:t,loading:i})}):e.jsx(fe,{}),o&&e.jsx(B,{isOpen:r,onClose:()=>s(!1),type:"pool",store:y()})]})}function ve(){const{id:a}=N(),t=v(),{vehicles:i,updateVehicle:r}=y(),s=i.find(d=>d.id===a),[l,c]=m.useState(s==null?void 0:s.color);if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Pool-Fahrzeug nicht gefunden."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles/pool"),children:"Zurück zur Pool-Fahrzeug Übersicht"})]});const o=async d=>{try{await r(s.id,{color:d.name}),c(d.name),h.success(`Farbe ${d.name} ausgewählt`)}catch{h.error("Fehler beim Aktualisieren der Farbe")}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("button",{onClick:()=>t("/vehicles/pool"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Zurück zur Pool-Fahrzeug Übersicht"]}),e.jsx(I,{vehicle:s}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsx(K,{images:s.images}),e.jsx(L,{vehicle:s}),e.jsx(T,{colors:s.availableColors,selectedColor:l,onColorSelect:o}),e.jsx(E,{features:s.features,customFeatures:s.customFeatures}),e.jsx(O,{services:s.services,prices:s.servicePrices})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:[s.make," ",s.model]}),e.jsx("p",{className:"text-lg text-gray-600 mt-2",children:s.type})]}),e.jsx(q,{vehicle:s})]})]})]})}function be(){const{id:a}=N(),t=v(),{vehicles:i,updateVehicle:r}=y(),{isAdmin:s}=w(),l=i.find(o=>o.id===a);if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Sie haben keine Berechtigung, Pool-Fahrzeuge zu bearbeiten."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles/pool"),children:"Zurück zur Pool-Fahrzeug Übersicht"})]});if(!l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Pool-Fahrzeug nicht gefunden."}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>t("/vehicles/pool"),children:"Zurück zur Pool-Fahrzeug Übersicht"})]});const c=async o=>{try{await r(a,o),h.success("Pool-Fahrzeug erfolgreich aktualisiert"),t("/vehicles/pool")}catch{h.error("Fehler beim Aktualisieren des Pool-Fahrzeugs")}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>t("/vehicles/pool"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Zurück zur Pool-Fahrzeug Übersicht"]}),e.jsxs("h1",{className:"text-2xl font-semibold",children:[l.make," ",l.model," bearbeiten"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx(Z,{initialData:l,onSubmit:c,onCancel:()=>t("/vehicles/pool"),type:"pool"})})]})}function Oe(){return e.jsxs(X,{children:[e.jsx(f,{index:!0,element:e.jsx(de,{})}),e.jsx(f,{path:":id",element:e.jsx(xe,{})}),e.jsx(f,{path:"edit/:id",element:e.jsx(ue,{})}),e.jsx(f,{path:"customer-benefits",element:e.jsx(ge,{})}),e.jsx(f,{path:"pool",element:e.jsx(je,{})}),e.jsx(f,{path:"pool/:id",element:e.jsx(ve,{})}),e.jsx(f,{path:"pool/edit/:id",element:e.jsx(be,{})})]})}export{Oe as default};
